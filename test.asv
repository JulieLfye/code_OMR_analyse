% code test

%% determination des séquences à garder en fonction de l'angle
ff = find(isnan(seq(1,:))==1);

OMRangle = 0; % if OMRangle = 0, then angle = ang_OMR
corrected_angle = nan(nb_detected_object,nb_frame);

f = 1;
% for f = 1:nb_detected_object
    if f == 1
        ind_seq = seq(:,1:ff(f)-1);
    else
        ind_seq = seq(:,ff(f-1)+1:ff(f)-1);
    end
    
%     while isempty(ind_seq) == 0
        cx = xbody(f,ind_seq(1,1):ind_seq(2,1));
        cy = ybody(f,ind_seq(1,1):ind_seq(2,1));
        cang = ang_body(f,ind_seq(1,1):ind_seq(2,1));
        % correct angle of the sequence
        [angle, ~] = correct_angle_sequence(cang, fig, OMRangle);
        corrected_angle(f,ind_seq(1,1):ind_seq(2,1)) = angle
        
        
        
        ind_seq(:,1) = [];
%     end
    
% end